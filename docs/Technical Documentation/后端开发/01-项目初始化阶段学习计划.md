# Pythonåç«¯å¼€å‘å­¦ä¹ è®¡åˆ’ - é¡¹ç›®åˆå§‹åŒ–é˜¶æ®µ

## å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬é˜¶æ®µå­¦ä¹ ï¼Œæ‚¨å°†æŒæ¡ï¼š
- æ ‡å‡†Pythoné¡¹ç›®ç›®å½•ç»“æ„è®¾è®¡
- è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œç®¡ç†
- ä¾èµ–åŒ…ç®¡ç†å’Œrequirements.txté…ç½®
- Gitç‰ˆæœ¬æ§åˆ¶åˆå§‹åŒ–å’Œé…ç½®
- é¡¹ç›®åŸºç¡€é…ç½®æ–‡ä»¶ç¼–å†™

## å®æˆ˜é¡¹ç›®ï¼šäººåŠ›èµ„æºè°ƒåº¦ç³»ç»Ÿåç«¯

æˆ‘ä»¬å°†ä»¥å¼€å‘ä¸€ä¸ªå®Œæ•´çš„äººåŠ›èµ„æºè°ƒåº¦ç³»ç»Ÿä¸ºä¾‹ï¼Œä»é›¶å¼€å§‹æ„å»ºPythonåç«¯é¡¹ç›®ã€‚

## ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ ‡å‡†é¡¹ç›®ç›®å½•ç»“æ„

### 1.1 é¡¹ç›®ç›®å½•è§„åˆ’

```
hr_scheduling_system/
â”œâ”€â”€ app/                    # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ __init__.py        # åº”ç”¨åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py        # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ project.py     # é¡¹ç›®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ schedule.py    # è°ƒåº¦æ¨¡å‹
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py        # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ users.py       # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ projects.py    # é¡¹ç›®ç®¡ç†API
â”‚   â”‚   â””â”€â”€ schedules.py   # è°ƒåº¦ç®¡ç†API
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”œâ”€â”€ project_service.py
â”‚   â”‚   â””â”€â”€ schedule_service.py
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ validators.py  # æ•°æ®éªŒè¯
â”‚   â”‚   â”œâ”€â”€ decorators.py  # è£…é¥°å™¨
â”‚   â”‚   â””â”€â”€ helpers.py     # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ schemas/           # æ•°æ®åºåˆ—åŒ–
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ user_schema.py
â”‚       â”œâ”€â”€ project_schema.py
â”‚       â””â”€â”€ schedule_schema.py
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ development.py     # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ production.py      # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ testing.py         # æµ‹è¯•ç¯å¢ƒé…ç½®
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py        # pytesté…ç½®
â”‚   â”œâ”€â”€ test_auth.py       # è®¤è¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_users.py      # ç”¨æˆ·æµ‹è¯•
â”‚   â”œâ”€â”€ test_projects.py   # é¡¹ç›®æµ‹è¯•
â”‚   â””â”€â”€ test_schedules.py  # è°ƒåº¦æµ‹è¯•
â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api.md            # APIæ–‡æ¡£
â”‚   â””â”€â”€ deployment.md     # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ init_db.py        # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â””â”€â”€ seed_data.py      # æµ‹è¯•æ•°æ®ç”Ÿæˆ
â”œâ”€â”€ requirements/          # ä¾èµ–æ–‡ä»¶
â”‚   â”œâ”€â”€ base.txt          # åŸºç¡€ä¾èµ–
â”‚   â”œâ”€â”€ development.txt   # å¼€å‘ä¾èµ–
â”‚   â””â”€â”€ production.txt    # ç”Ÿäº§ä¾èµ–
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore            # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ run.py                # åº”ç”¨å¯åŠ¨æ–‡ä»¶
â””â”€â”€ requirements.txt      # ä¸»ä¾èµ–æ–‡ä»¶
```

### 1.2 åˆ›å»ºé¡¹ç›®ç›®å½•å‘½ä»¤

```bash
# åˆ›å»ºä¸»é¡¹ç›®ç›®å½•
mkdir hr_scheduling_system
cd hr_scheduling_system

# åˆ›å»ºåº”ç”¨æ ¸å¿ƒç›®å½•
mkdir app
mkdir app/models app/api app/services app/utils app/schemas

# åˆ›å»ºé…ç½®å’Œæµ‹è¯•ç›®å½•
mkdir config tests migrations docs scripts requirements

# åˆ›å»º__init__.pyæ–‡ä»¶
touch app/__init__.py
touch app/models/__init__.py
touch app/api/__init__.py
touch app/services/__init__.py
touch app/utils/__init__.py
touch app/schemas/__init__.py
touch config/__init__.py
touch tests/__init__.py
```

### 1.3 ç›®å½•ç»“æ„è®¾è®¡åŸåˆ™

**åˆ†å±‚æ¶æ„åŸåˆ™**ï¼š
- `models/`: æ•°æ®è®¿é—®å±‚ï¼Œå®šä¹‰æ•°æ®æ¨¡å‹å’Œæ•°æ®åº“äº¤äº’
- `api/`: è¡¨ç°å±‚ï¼Œå¤„ç†HTTPè¯·æ±‚å’Œå“åº”
- `services/`: ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå®ç°æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- `utils/`: å·¥å…·å±‚ï¼Œæä¾›é€šç”¨åŠŸèƒ½å’Œè¾…åŠ©å‡½æ•°
- `schemas/`: æ•°æ®ä¼ è¾“å±‚ï¼Œå®šä¹‰APIè¾“å…¥è¾“å‡ºæ ¼å¼

**å…³æ³¨ç‚¹åˆ†ç¦»**ï¼š
- é…ç½®æ–‡ä»¶ç‹¬ç«‹ç®¡ç†ï¼ˆ`config/`ï¼‰
- æµ‹è¯•ä»£ç ç‹¬ç«‹ç»„ç»‡ï¼ˆ`tests/`ï¼‰
- æ–‡æ¡£å’Œè„šæœ¬åˆ†åˆ«å­˜æ”¾

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå’Œé…ç½®è™šæ‹Ÿç¯å¢ƒ

### 2.1 ä½¿ç”¨venvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# Linux/macOS
source venv/bin/activate

# éªŒè¯è™šæ‹Ÿç¯å¢ƒ
which python  # åº”è¯¥æŒ‡å‘è™šæ‹Ÿç¯å¢ƒä¸­çš„python
python --version
```

### 2.2 è™šæ‹Ÿç¯å¢ƒç®¡ç†æœ€ä½³å®è·µ

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š
```bash
# åˆ›å»º.envæ–‡ä»¶
touch .env

# .envæ–‡ä»¶å†…å®¹ç¤ºä¾‹
APP_MODULE=app.main:app
ENVIRONMENT=development
DATABASE_URL=postgresql://user:password@localhost/hr_scheduling
SECRET_KEY=your-secret-key-here
JWT_SECRET_KEY=your-jwt-secret-key
REDIS_URL=redis://localhost:6379/0
```

**è™šæ‹Ÿç¯å¢ƒè„šæœ¬**ï¼š
```bash
# åˆ›å»ºactivateè„šæœ¬ (scripts/activate_env.sh)
#!/bin/bash
source venv/bin/activate
export $(cat .env | xargs)
echo "è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»ï¼Œç¯å¢ƒå˜é‡å·²åŠ è½½"
```

### 2.3 Pythonç‰ˆæœ¬ç®¡ç†

```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬å…¼å®¹æ€§
python --version  # æ¨èPython 3.8+

# åˆ›å»º.python-versionæ–‡ä»¶ï¼ˆpyenvç”¨æˆ·ï¼‰
echo "3.9.16" > .python-version

# éªŒè¯pipç‰ˆæœ¬
pip --version
pip install --upgrade pip
```

## ç¬¬ä¸‰æ­¥ï¼šä¾èµ–åŒ…ç®¡ç†å’Œrequirements.txté…ç½®

### 3.1 åŸºç¡€ä¾èµ–åŒ…å®‰è£…

```bash
# å®‰è£…FastAPIæ¡†æ¶å’Œæ ¸å¿ƒä¾èµ–
pip install fastapi==0.104.1
pip install uvicorn[standard]==0.24.0
pip install sqlalchemy==2.0.23
pip install alembic==1.12.1
pip install python-jose[cryptography]==3.3.0
pip install passlib[bcrypt]==1.7.4
pip install python-multipart==0.0.6

# å®‰è£…æ•°æ®åº“é©±åŠ¨
pip install psycopg2-binary==2.9.7  # PostgreSQL
pip install PyMySQL==1.1.0          # MySQL

# å®‰è£…æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
pip install pydantic==2.5.0
pip install pydantic-settings==2.1.0

# å®‰è£…å…¶ä»–æ ¸å¿ƒä¾èµ–
pip install python-dotenv==1.0.0    # ç¯å¢ƒå˜é‡ç®¡ç†
pip install redis==4.6.0            # Rediså®¢æˆ·ç«¯
pip install celery==5.3.1           # å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
pip install gunicorn==21.2.0        # ASGIæœåŠ¡å™¨
```

### 3.2 requirements.txtæ–‡ä»¶ç»“æ„

**requirements/base.txt** (åŸºç¡€ä¾èµ–):
```txt
# Webæ¡†æ¶
fastapi==0.104.1
uvicorn[standard]==0.24.0

# æ•°æ®åº“
psycopg2-binary==2.9.7
sqlalchemy==2.0.23
alembic==1.12.1

# æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
pydantic==2.5.0
pydantic-settings==2.1.0

# è®¤è¯å’Œå®‰å…¨
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6

# å·¥å…·åº“
python-dotenv==1.0.0
redis==4.6.0
celery==5.3.1
requests==2.31.0

# æ—¥æœŸæ—¶é—´å¤„ç†
python-dateutil==2.8.2

# é…ç½®ç®¡ç†
click==8.1.7
**requirements/development.txt** (å¼€å‘ç¯å¢ƒä¾èµ–):
```txt
-r base.txt

# æµ‹è¯•æ¡†æ¶
pytest==7.4.2
pytest-cov==4.1.0
pytest-asyncio==0.21.1
httpx==0.25.2
factory-boy==3.3.0
```
# ä»£ç è´¨é‡
flake8==6.0.0
black==23.7.0
isort==5.12.0
mypy==1.5.1

# å¼€å‘å·¥å…·
ipython==8.15.0
watchdog==3.0.0

# APIæ–‡æ¡£ï¼ˆFastAPIè‡ªå¸¦Swagger UIï¼‰
# æ— éœ€é¢å¤–ä¾èµ–

# è°ƒè¯•å·¥å…·
rich==13.5.2  # ç¾åŒ–è¾“å‡º
uvicorn[standard]==0.23.2  # å¼€å‘æœåŠ¡å™¨
```

**requirements/production.txt** (ç”Ÿäº§ç¯å¢ƒä¾èµ–):
```txt
-r base.txt

# ASGIæœåŠ¡å™¨
uvicorn[standard]==0.23.2
gunicorn==21.2.0  # å¯é€‰çš„è¿›ç¨‹ç®¡ç†å™¨

# ç›‘æ§å’Œæ—¥å¿—
prometheus-client==0.17.1
structlog==23.1.0

# å®‰å…¨
fastapi-limiter==0.1.5  # APIé™æµ
secure==0.3.0  # å®‰å…¨å¤´è®¾ç½®
```

### 3.3 ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ

**ç‰ˆæœ¬é”å®šç­–ç•¥**ï¼š
```bash
# ç”Ÿæˆç²¾ç¡®ç‰ˆæœ¬çš„requirements.txt
pip freeze > requirements.txt

# å®‰è£…æŒ‡å®šç‰ˆæœ¬ä¾èµ–
pip install -r requirements/development.txt

# æ›´æ–°ä¾èµ–åŒ…
pip install --upgrade package_name
pip freeze > requirements.txt
```

**ä¾èµ–å®‰å…¨æ£€æŸ¥**ï¼š
```bash
# å®‰è£…å®‰å…¨æ£€æŸ¥å·¥å…·
pip install safety

# æ£€æŸ¥ä¾èµ–åŒ…å®‰å…¨æ¼æ´
safety check

# æ£€æŸ¥è¿‡æœŸä¾èµ–
pip list --outdated
```

## ç¬¬å››æ­¥ï¼šGitç‰ˆæœ¬æ§åˆ¶åˆå§‹åŒ–

### 4.1 Gitä»“åº“åˆå§‹åŒ–

```bash
# åˆå§‹åŒ–Gitä»“åº“
git init

# é…ç½®ç”¨æˆ·ä¿¡æ¯
git config user.name "Your Name"
git config user.email "your.email@example.com"

# è®¾ç½®é»˜è®¤åˆ†æ”¯
git config init.defaultBranch main
```

### 4.2 .gitignoreæ–‡ä»¶é…ç½®

åˆ›å»º`.gitignore`æ–‡ä»¶ï¼š
```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
PYTHONPATH

# è™šæ‹Ÿç¯å¢ƒ
venv/
env/
ENV/
env.bak/
venv.bak/

# ç¯å¢ƒå˜é‡
.env
.env.local
.env.development
.env.production

# æ•°æ®åº“
*.db
*.sqlite3

# æ—¥å¿—æ–‡ä»¶
*.log
logs/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# æ“ä½œç³»ç»Ÿ
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# æµ‹è¯•è¦†ç›–ç‡
.coverage
.pytest_cache/
cov.xml
*.cover
*.py,cover
.hypothesis/

# FastAPI
# æ— ç‰¹å®šå¿½ç•¥é¡¹ï¼Œä½¿ç”¨é€šç”¨Pythonå¿½ç•¥è§„åˆ™

# Celery
celerybeat-schedule
celerybeat.pid

# Redis dump
dump.rdb

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp

# éƒ¨ç½²ç›¸å…³
.docker/
docker-compose.override.yml
```

### 4.3 Gitå·¥ä½œæµé…ç½®

**åˆ†æ”¯ç­–ç•¥**ï¼š
```bash
# åˆ›å»ºå¼€å‘åˆ†æ”¯
git checkout -b develop

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/user-authentication
git checkout -b feature/project-management
git checkout -b feature/scheduling-algorithm

# åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.0.0

# åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
git checkout -b hotfix/critical-bug-fix
```

**æäº¤ä¿¡æ¯è§„èŒƒ**ï¼š
```bash
# æäº¤ç±»å‹
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# æäº¤ç¤ºä¾‹
git commit -m "feat(auth): æ·»åŠ JWTç”¨æˆ·è®¤è¯åŠŸèƒ½"
git commit -m "fix(api): ä¿®å¤ç”¨æˆ·åˆ—è¡¨åˆ†é¡µé—®é¢˜"
git commit -m "docs(readme): æ›´æ–°é¡¹ç›®å®‰è£…è¯´æ˜"
```

**Git Hooksé…ç½®**ï¼š
```bash
# åˆ›å»ºpre-commit hook
touch .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit

# pre-commitå†…å®¹
#!/bin/bash
# è¿è¡Œä»£ç æ ¼å¼æ£€æŸ¥
black --check .
flake8 .

# è¿è¡Œæµ‹è¯•
pytest tests/ -v

if [ $? -ne 0 ]; then
    echo "æäº¤å¤±è´¥ï¼šè¯·ä¿®å¤ä»£ç è´¨é‡é—®é¢˜"
    exit 1
fi
```

## ç¬¬äº”æ­¥ï¼šé¡¹ç›®åŸºç¡€é…ç½®æ–‡ä»¶

### 5.1 åº”ç”¨é…ç½®æ–‡ä»¶

**config/__init__.py**:
```python
"""
é…ç½®æ¨¡å—åˆå§‹åŒ–
"""
import os
from typing import Type

from .development import DevelopmentConfig
from .production import ProductionConfig
from .testing import TestingConfig

# é…ç½®æ˜ å°„
config_map = {
    'development': DevelopmentConfig,
    'production': ProductionConfig,
    'testing': TestingConfig
}

def get_config() -> Type:
    """
    æ ¹æ®ç¯å¢ƒå˜é‡è·å–é…ç½®ç±»
    
    Returns:
        é…ç½®ç±»
    """
    env = os.getenv('ENVIRONMENT', 'development')
    return config_map.get(env, DevelopmentConfig)
```

**config/development.py**:
```python
"""
å¼€å‘ç¯å¢ƒé…ç½®
"""
import os
from datetime import timedelta

class DevelopmentConfig:
    """
    å¼€å‘ç¯å¢ƒé…ç½®ç±»
    """
    # åŸºç¡€é…ç½®
    DEBUG = True
    TESTING = False
    SECRET_KEY = os.getenv('SECRET_KEY', 'dev-secret-key-change-in-production')
    
    # æ•°æ®åº“é…ç½®
    SQLALCHEMY_DATABASE_URI = os.getenv(
        'DATABASE_URL',
        'postgresql://postgres:password@localhost/hr_scheduling_dev'
    )
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    SQLALCHEMY_ECHO = True  # å¼€å‘ç¯å¢ƒæ˜¾ç¤ºSQLè¯­å¥
    
    # JWTé…ç½®
    JWT_SECRET_KEY = os.getenv('JWT_SECRET_KEY', 'jwt-secret-change-in-production')
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(hours=1)
    JWT_REFRESH_TOKEN_EXPIRES = timedelta(days=30)
    
    # Redisé…ç½®
    REDIS_URL = os.getenv('REDIS_URL', 'redis://localhost:6379/0')
    
    # Celeryé…ç½®
    CELERY_BROKER_URL = os.getenv('CELERY_BROKER_URL', 'redis://localhost:6379/0')
    CELERY_RESULT_BACKEND = os.getenv('CELERY_RESULT_BACKEND', 'redis://localhost:6379/0')
    
    # é‚®ä»¶é…ç½®
    MAIL_SERVER = os.getenv('MAIL_SERVER', 'localhost')
    MAIL_PORT = int(os.getenv('MAIL_PORT', 587))
    MAIL_USE_TLS = os.getenv('MAIL_USE_TLS', 'true').lower() in ['true', 'on', '1']
    MAIL_USERNAME = os.getenv('MAIL_USERNAME')
    MAIL_PASSWORD = os.getenv('MAIL_PASSWORD')
    
    # æ—¥å¿—é…ç½®
    LOG_LEVEL = 'DEBUG'
    LOG_FILE = 'logs/hr_scheduling_dev.log'
    
    # APIé™æµé…ç½®
    RATELIMIT_STORAGE_URL = os.getenv('REDIS_URL', 'redis://localhost:6379/1')
    RATELIMIT_DEFAULT = "100 per hour"
    
    # æ–‡ä»¶ä¸Šä¼ é…ç½®
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MB
    UPLOAD_FOLDER = 'uploads/'
    ALLOWED_EXTENSIONS = {'txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif', 'csv', 'xlsx'}
```

### 5.2 åº”ç”¨å¯åŠ¨æ–‡ä»¶

**main.py**:
```python
#!/usr/bin/env python3
"""
äººåŠ›èµ„æºè°ƒåº¦ç³»ç»Ÿ - FastAPIåº”ç”¨å¯åŠ¨æ–‡ä»¶

ä½¿ç”¨æ–¹æ³•:
    uvicorn main:app --reload
    python main.py
"""
import os
import uvicorn
from fastapi import FastAPI

from app import create_app
from app.core.config import settings

# åˆ›å»ºFastAPIåº”ç”¨å®ä¾‹
app = create_app()

if __name__ == '__main__':
    # å¼€å‘ç¯å¢ƒç›´æ¥è¿è¡Œ
    port = int(os.getenv('PORT', 8000))
    host = os.getenv('HOST', '127.0.0.1')
    
    uvicorn.run(
        "main:app",
        host=host,
        port=port,
        reload=settings.DEBUG,
        log_level="info" if not settings.DEBUG else "debug"
    )
```

**scripts/init_db.py** (æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬):
```python
#!/usr/bin/env python3
"""
æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

ä½¿ç”¨æ–¹æ³•:
    python scripts/init_db.py
"""
import asyncio
from sqlalchemy import create_engine
from sqlalchemy.ext.asyncio import create_async_engine

from app.core.config import settings
from app.models.base import Base
from app.models import User, Project, Schedule

async def init_db():
    """
    åˆå§‹åŒ–æ•°æ®åº“è¡¨
    """
    engine = create_async_engine(settings.DATABASE_URL)
    
    async with engine.begin() as conn:
        # åˆ›å»ºæ‰€æœ‰è¡¨
        await conn.run_sync(Base.metadata.create_all)
    
    print("æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ")

async def seed_db():
    """
    å¡«å……æµ‹è¯•æ•°æ®
    """
    from scripts.seed_data import seed_database
    await seed_database()
    print("æµ‹è¯•æ•°æ®å¡«å……å®Œæˆ")

if __name__ == '__main__':
    asyncio.run(init_db())
```

### 5.3 README.mdæ–‡æ¡£

**README.md**:
```markdown
# äººåŠ›èµ„æºè°ƒåº¦ç³»ç»Ÿåç«¯

åŸºäºFastAPIçš„æ™ºèƒ½äººåŠ›èµ„æºè°ƒåº¦ç®¡ç†ç³»ç»Ÿåç«¯APIæœåŠ¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” JWTç”¨æˆ·è®¤è¯å’Œæˆæƒ
- ğŸ‘¥ ç”¨æˆ·å’Œè§’è‰²ç®¡ç†
- ğŸ“‹ é¡¹ç›®ç®¡ç†
- ğŸ¤– æ™ºèƒ½è°ƒåº¦ç®—æ³•
- ğŸ“Š æ•°æ®åˆ†æå’ŒæŠ¥è¡¨
- ğŸ”„ å®æ—¶é€šçŸ¥ç³»ç»Ÿ
- ğŸ“ è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ (Swagger/OpenAPI)
- ğŸ§ª å…¨é¢çš„å•å…ƒæµ‹è¯•
- ğŸ³ Dockerå®¹å™¨åŒ–éƒ¨ç½²

## æŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**: FastAPI 0.104.1
- **ASGIæœåŠ¡å™¨**: Uvicorn
- **æ•°æ®åº“**: PostgreSQL + SQLAlchemy 2.0
- **æ•°æ®è¿ç§»**: Alembic
- **è®¤è¯**: JWT (python-jose)
- **æ•°æ®éªŒè¯**: Pydantic
- **ç¼“å­˜**: Redis
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery
- **æµ‹è¯•**: pytest + httpx
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆ (Swagger/OpenAPI)
- **éƒ¨ç½²**: Docker + Uvicorn/Gunicorn

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- PostgreSQL 12+
- Redis 6+

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd hr_scheduling_system
```

2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
```

3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements/development.txt
```

4. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

5. åˆå§‹åŒ–æ•°æ®åº“
```bash
alembic upgrade head
python scripts/init_db.py
```

6. å¯åŠ¨åº”ç”¨
```bash
uvicorn main:app --reload
# æˆ–è€…
python run.py
```

### APIæ–‡æ¡£

å¯åŠ¨åº”ç”¨åè®¿é—®: http://localhost:5000/api/docs

## é¡¹ç›®ç»“æ„

```
hr_scheduling_system/
â”œâ”€â”€ app/                 # åº”ç”¨æ ¸å¿ƒä»£ç 
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ tests/              # æµ‹è¯•ä»£ç 
â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ docs/               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/            # è„šæœ¬æ–‡ä»¶
â””â”€â”€ requirements/       # ä¾èµ–æ–‡ä»¶
```

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®éµå¾ªPEP8ä»£ç è§„èŒƒï¼Œä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œä»£ç è´¨é‡æ§åˆ¶ï¼š

```bash
# ä»£ç æ ¼å¼åŒ–
black .

# å¯¼å…¥æ’åº
isort .

# ä»£ç æ£€æŸ¥
flake8 .

# ç±»å‹æ£€æŸ¥
mypy app/
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_auth.py -v
```

### æ•°æ®åº“è¿ç§»

```bash
# ç”Ÿæˆè¿ç§»æ–‡ä»¶
alembic revision --autogenerate -m "æè¿°ä¿¡æ¯"

# åº”ç”¨è¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1
```

## éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t hr-scheduling-api .

# è¿è¡Œå®¹å™¨
docker run -p 5000:5000 hr-scheduling-api
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨Gunicornå¯åŠ¨
gunicorn -w 4 -b 0.0.0.0:5000 "app:create_app()"
```

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
```

## å­¦ä¹ æ£€æŸ¥ç‚¹

### PEP8ä»£ç è§„èŒƒè¦æ±‚

1. **å‘½åè§„èŒƒ**ï¼š
   - æ¨¡å—åï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš” (`user_service.py`)
   - ç±»åï¼šé©¼å³°å‘½å (`UserService`)
   - å‡½æ•°åï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš” (`get_user_by_id`)
   - å¸¸é‡ï¼šå¤§å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš” (`MAX_RETRY_COUNT`)

2. **ä»£ç æ ¼å¼**ï¼š
   - è¡Œé•¿åº¦ä¸è¶…è¿‡79å­—ç¬¦
   - ä½¿ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›
   - å‡½æ•°å’Œç±»ä¹‹é—´ç©º2è¡Œ
   - å¯¼å…¥è¯­å¥æŒ‰æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“ã€æœ¬åœ°åº“åˆ†ç»„

3. **æ–‡æ¡£å­—ç¬¦ä¸²**ï¼š
   - æ‰€æœ‰å…¬å…±å‡½æ•°å’Œç±»å¿…é¡»æœ‰docstring
   - ä½¿ç”¨Googleé£æ ¼æˆ–NumPyé£æ ¼æ–‡æ¡£å­—ç¬¦ä¸²

### èƒ½åŠ›è¯„ä¼°æ ‡å‡†

**åˆçº§æ°´å¹³** (å®Œæˆæœ¬é˜¶æ®µååº”è¾¾åˆ°):
- [ ] èƒ½å¤Ÿç‹¬ç«‹åˆ›å»ºæ ‡å‡†Pythoné¡¹ç›®ç»“æ„
- [ ] ç†Ÿç»ƒä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ä¾èµ–
- [ ] æŒæ¡requirements.txtçš„ç¼–å†™å’Œç®¡ç†
- [ ] èƒ½å¤Ÿé…ç½®Gitä»“åº“å’ŒåŸºæœ¬å·¥ä½œæµ
- [ ] ç†è§£é¡¹ç›®é…ç½®æ–‡ä»¶çš„ä½œç”¨å’Œç¼–å†™æ–¹æ³•

**è¯„ä¼°æ–¹å¼**:
1. ç‹¬ç«‹åˆ›å»ºä¸€ä¸ªæ–°çš„FastAPIé¡¹ç›®ï¼ŒåŒ…å«å®Œæ•´ç›®å½•ç»“æ„
2. é…ç½®å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ä¸‰å¥—ç¯å¢ƒçš„ä¾èµ–æ–‡ä»¶
3. ç¼–å†™é¡¹ç›®READMEæ–‡æ¡£
4. è®¾ç½®Gitä»“åº“å¹¶å®Œæˆé¦–æ¬¡æäº¤

## ä¸‹ä¸€é˜¶æ®µé¢„å‘Š

å®Œæˆé¡¹ç›®åˆå§‹åŒ–åï¼Œæˆ‘ä»¬å°†è¿›å…¥**åŸºç¡€å¼€å‘é˜¶æ®µ**ï¼Œå­¦ä¹ å†…å®¹åŒ…æ‹¬ï¼š
- FastAPIåº”ç”¨åˆ›å»ºå’Œé…ç½®
- ç¬¬ä¸€ä¸ªRESTful APIç«¯ç‚¹å¼€å‘
- SQLAlchemyæ•°æ®æ¨¡å‹è®¾è®¡
- æ•°æ®åº“è¿æ¥å’ŒåŸºæœ¬CRUDæ“ä½œ

---

*ç»§ç»­å­¦ä¹ ä¸‹ä¸€é˜¶æ®µï¼š[02-åŸºç¡€å¼€å‘é˜¶æ®µå­¦ä¹ è®¡åˆ’](./02-åŸºç¡€å¼€å‘é˜¶æ®µå­¦ä¹ è®¡åˆ’.md)*